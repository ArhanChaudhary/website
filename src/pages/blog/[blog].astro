---
import type { MDXInstance } from "astro";
import type { BlogFrontmatter } from "../blog.astro";
import BlogLayout from "../../layouts/BlogLayout.astro";

export async function getStaticPaths() {
  const allBlogs = (await Astro.glob<BlogFrontmatter>(
    "../blog/*.mdx"
  )) as MDXInstance<Record<string, any>>[];
  return allBlogs.map((blog) => ({
    params: {
      blog: blog.url!.split("/").at(-1)!.toLowerCase().replaceAll(" ", "-"),
    },
    props: {
      blog,
    },
  }));
}

const { blog } = Astro.props;
---

<BlogLayout {blog}>
  <blog.Content />
</BlogLayout>
