---
import Layout from "../layouts/Layout.astro";
import BlogPreview from "../components/BlogPreview.astro";
const allPosts = await Astro.glob("../pages/blog/*.mdx");
---

<Layout title="Arhan's Blog" highlightIndex={3} sshUser="blog">
  <div id="blog-page-wrapper" class="input-mono">
    <h1>My blog</h1>
    {
      allPosts
        .sort((a, b) => {
          if (
            new Date(a.frontmatter.pubDate) > new Date(b.frontmatter.pubDate)
          ) {
            return -1;
          } else {
            return 1;
          }
        })
        .map((post, i) => (
          <BlogPreview
            pubDate={new Date(post.frontmatter.pubDate).toLocaleDateString(
              "en-US",
              {
                year: "2-digit",
                month: "numeric",
                day: "numeric",
              }
            )}
            title={post.frontmatter.title}
            description={post.frontmatter.description}
            url={post.url}
            colorDotRed={i % 2 === 0}
            first={i === 0}
            last={i === allPosts.length - 1}
          />
        ))
    }
  </div>
</Layout>

<style lang="scss">
  #blog-page-wrapper {
    max-width: var(--common-max-width);
  }

  h1 {
    display: inline-block;
    padding-top: 6px;
    padding-bottom: 6px;
    border-top: 4px solid var(--lr);
    border-bottom: 4px solid var(--lb);
    margin-bottom: 50px;
  }
</style>
