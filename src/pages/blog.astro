---
import Layout from "../layouts/Layout.astro";
import BlogPreview from "../components/BlogPreview.astro";
const allPosts = await Astro.glob("../pages/blog/!(README).md");
---

<Layout title="Arhan's Blog" highlightIndex={3} sshUser="blog">
  <div id="blog-page-wrapper" class="input-mono">
    <h1>My blog</h1>
    {
      allPosts
        .sort((a, b) => {
          if (
            new Date(a.frontmatter.pubDate) > new Date(b.frontmatter.pubDate)
          ) {
            return -1;
          } else {
            return 1;
          }
        })
        .map((post) => (
          <BlogPreview
            pubDate={new Date(post.frontmatter.pubDate).toLocaleDateString(
              "en-US"
            )}
            title={post.frontmatter.title}
            description={post.frontmatter.description}
            url={post.url}
          />
        ))
    }
  </div>
</Layout>

<style>
  #blog-page-wrapper {
    max-width: 800px;
  }

  h1 {
    display: inline-block;
    padding-top: 6px;
    padding-bottom: 6px;
    border-top: 4px solid var(--lr);
    border-bottom: 4px solid var(--lb);
  }
</style>
